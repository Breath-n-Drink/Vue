<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://unpkg.com/vue@next"></script>
  <script>
    $(document).ready(function () {
      $("#myModalVerify").modal({ backdrop: "static" });
      $("#myModalVerify").modal('show');
    });
  </script>
  <link rel="Stylesheet" type="text/css" href="index.css">
  <title>BreathNDrink</title>
</head>

<body>
  <div id="myModalVerify" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Are you 18?</h5>
        </div>
        <div id="verify" class="collapse">
          <b id="ageAlert">You need to be 18 to use this app!!!</b>
        </div>
        <div id="verificationBody" class="modal-body">
          <button id="yesButton" class="btn btn-primary" data-bs-dismiss="modal">Yes</button>
          <a href="#verify" id="noButton" data-bs-toggle="collapse" class="btn btn-danger">No</a>
        </div>
      </div>
    </div>
  </div>

  <div id="app" class="container-fluid">
  
  
  
    <h1>Breath 'n' Drink</h1>

    <div v-if="!loggedIn" class="login">
      <input v-model="name" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
      <button v-on:click="getDrinker()" class="btn btn-primary">Submit</button>
    </div>
<div v-else class="wrapper">
    <button id="GetMålingButton" v-on:click="getMåling()" class="btn btn-primary">Måling</button>
    <!-- <div id="Promille" v-if="currentBAC"> {{ currentBAC }} </div>
    <div v-else>ingen målinger</div> -->
    <div></div>

<div class="gauge-wrapper">
  <div v-if="currentBAC <= 1">
    <div class="gauge four rischio1">
      <div class="slice-colors">
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
      </div>
      <div class="needle"></div>
      <div class="gauge-center">
        <div class="label">Promille</div>
        <div id="Promille" class="number">{{ currentBAC }}</div>
      </div>
    </div>
  </div>

  <div v-if="currentBAC < 2 && currentBAC >= 1">
    <div class="gauge four rischio2">
      <div class="slice-colors">
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
      </div>
      <div class="needle"></div>
      <div class="gauge-center">
        <div class="label">Promille</div>
        <div id="Promille" class="number">{{ currentBAC }}</div>
      </div>
    </div>
  </div>

  <div v-if="currentBAC >= 2 && currentBAC < 3">
    <div class="gauge four rischio3">
      <div class="slice-colors">
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
      </div>
      <div class="needle"></div>
      <div class="gauge-center">
        <div class="label">Promille</div>
        <div id="Promille" class="number">{{ currentBAC }}</div>
      </div>
    </div>
  </div>

  <div v-if="currentBAC >= 3">
    <div class="gauge four rischio4">
      <div class="slice-colors">
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
        <div class="st slice-item"></div>
      </div>
      <div class="needle"></div>
      <div class="gauge-center">
        <div class="label">Promille</div>
        <div id="Promille" class="number">{{ currentBAC }}</div>
      </div>
    </div>
  </div>
</div>
<div id="hiddenStuff">
    <p>Den virker ved at du trykke på joysticket på raspberry pi'en og så får du en promille.</p>
    <button id="filterButton" class="btn btn-primary" data-bs-toggle="collapse" data-bs-target="#demo">Filters</button><br>
    <div class="filterContainer collapse" id="demo">
      <h5>Info</h5>
      <input type="number" class="number" step="any" id="weightField" placeholder="Kropsvægt" v-model="weight" required>
      <input type="number" class="number" step="any" id="currentBacField" placeholder="Nuværende promille" v-model="currentBAC" required>
      <input type="number" class="number" step="any" id="maxBacField" placeholder="Max ønskede promille" v-model="maxBAC" required>&nbsp;
      <button v-on:click="fuck()" class="btn btn-primary"></button>
      <br>
      <h5>Gender</h5>
      <input type="radio" id="genderToggleNone" name="genderToggle" value="0" v-model="gender" checked>
      <label for="genderToggleNone">No gender</label>&nbsp;
      <input type="radio" id="genderToggleMan" name="genderToggle" value="1" v-model="gender">
      <label for="genderToggleMan">Man</label>&nbsp;
      <input type="radio" id="genderToggleWoman" name="genderToggle" value="2" v-model="gender">
      <label for="genderToggleWoman">Woman</label>
      <br>
      
          <h5>Include</h5>
          <div class="filter">
            <div class="form-check" v-for="item in filterableItems">
              <input class="form-check-input" v-on:click="addFilter(item)" type="checkbox" value="" id="filterItem">
              <label class="form-check-label" for="filterItem">
                {{item}}
              </label>
            </div>
            
          </div>
          <h5>Do not include</h5>
          <div class="filter">
            <div class="form-check" v-for="item in notFilterableItems">
              <input class="form-check-input" v-on:click="addNotFilter(item)" type="checkbox" value="" id="filterNotItem">
              <label class="form-check-label" for="filterNotItem">
                {{item}}
              </label>
            </div>
            
          </div>
          <div class="alcFilter" style="display: flex;">
            <h5>Alkohol procent</h5>

            <input type="range" v-model="filterAlcPer[0]" class="custom-range" min="0" max="100" value="0" id="alkoFilter1"  oninput="this.nextElementSibling.value = 'Minimum: ' + this.value + '%'">
            <output>Minimum: 0%</output>

            <input type="range" v-model="filterAlcPer[1]" class="custom-range" min="0" max="100" value="100" id="alkoFilter2" oninput="this.nextElementSibling.value = 'Maximum: ' + this.value  + '%'">
            <output>Maximum: 100%</output>
          </div>
        </div>
    <br>
      <button v-on:click="filter()" class="btn btn-primary"
        id="recommendButton">Foreslå
        opskrifter</button>
  
    
    <button id="showAllButton" v-on:click="getDrinks()" class="btn btn-primary">Vis alle opskrifter</button>
  </div>
    <table id="DrinkList" v-if="drinks.length" class="table table-bordered">
      <thead>
        <tr>
          <th scope="col">Billede</th>
          <th scope="col">Name</th>
          <th scope="col">Alkohol indhold</th>
          <th scope="col">Volumen</th>
          <th scope="col">Ingredients</th>
          <th scope="col">PromilleChange</th>
          <th scope="col">Rating</th>
        </tr>
      </thead>
      <tbody>
        <tr scope="row" class="drink" data-bs-toggle="modal" data-bs-target="#myModal" v-for="drink in drinks"
          v-on:click="adjustModal(drink)">
          <td><img v-bind:src="drink.imgThumbUrl" alt="ThumbImg" width="70" height="100"></td>
          <td>{{drink.name}}</td>
          <td>{{calculatePct(drink.alcoholPercentage)}}</td>
          <td>{{calculateVol(drink.totalVolume)}}</td>
          <td>
            <p v-for="ingredient in drink.ingredientList">
              {{ingredient}}
            </p>
          </td>
          <td>+ {{projectedPromille(drink.totalVolume, drink.alcoholPercentage, weight, gender)}}</td>
          <td>{{drink.rating}}</td>
        </tr>
      </tbody>
    </table>
    <h5 v-else id="hidden-message">{{filterMessage}}</h5>
  </div>
    <!-- Button to Open the Modal -->
    <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal">
    Open modal
  </button> -->

    <!-- The Modal -->
    <div class="modal" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 id="DrinkName" class="modal-title">{{ modalDrink.name}}</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <img v-bind:src="modalDrink.imgThumbUrl" alt="ThumbImg" width="70" height="100"><br>
            <p id="AlcoholPercentage">Alkohol {{Math.round(modalDrink.alcoholPercentage * 100)}}%</p> <br>
            {{modalDrink.instructions}}<br><br>

            <div class="row">
              <div id="Ingredients" class="col-sm-6"><b>Ingredients</b>
                <p v-for="ingredient in modalDrink.ingredientList">
                  {{ingredient}}
                </p>
              </div>
              <div id="Measurements" class="col-sm-6"><b>Measurements</b>
                <p v-for="measurement in modalDrink.measurementList">
                  {{measurement}}
                </p>
              </div>
            </div>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
          </div>

        </div>
      </div>
    </div>


  </div>
  <script src="index.js"></script>
</body>

</html>